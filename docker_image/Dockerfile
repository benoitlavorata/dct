############################################################
# Dockerfile to build ODOO base images (FAL)
# Based on Ubuntu 16.04
############################################################
FROM ubuntu:16.04
MAINTAINER Benoit Lavorata <benoit@sbg-live.com>

#ENVIRONMENT VARIABLES
ARG IMAGE_NAME="CUSTOM_IMAGE_NAME"
ARG INSTALL_DIR="/container_install"
ARG ENTRYPOINT_DIR="/entrypoint"

# CUSTOM LIST OF PACKAGES TO INSTALL
ENV MIRRORS_LOCATION="CUSTOM_MIRRORS_LOCATION" \
    MIRRORS_APT_CHINA="CUSTOM_MIRRORS_APT_CHINA" \
    UBUNTU_ADDITIONAL_DEP="CUSTOM_UBUNTU_ADDITIONAL_DEP" \
    APT_UPGRADE="CUSTOM_APT_UPGRADE"
    SSH_ENABLED="CUSTOM_SSH_ENABLED" \
    SSH_LOGIN="CUSTOM_SSH_LOGIN" \
    SSH_PASS="CUSTOM_SSH_PASS"

#PREPARE INSTALL SCRIPT
ENV DEBIAN_FRONTEND noninteractive
COPY ./${INSTALL_DIR} ${INSTALL_DIR}
RUN chmod +x ${INSTALL_DIR}/*.sh
RUN .${INSTALL_DIR}/install.sh
RUN rm -r ${INSTALL_DIR}
ENV DEBIAN_FRONTEND teletype

EXPOSE CUSTOM_EXPOSED_PORTS
ENTRYPOINT ["/entrypoint.sh"]
